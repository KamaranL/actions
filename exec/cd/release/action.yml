name: cd-release
description: ''
inputs:
  assets:
    description: ''

runs:
  using: composite
  steps:
    - run: $GITHUB_ACTION_PATH/pre.sh
      shell: bash
      id: pre

    - run: $GITHUB_ACTION_PATH/main.sh
      shell: bash
      env:
        INPUT_ASSETS: ${{ inputs.assets }}
        TAG: ${{ steps.pre.outputs.tag }}
      id: main

    # - if: inputs.assets == null
    #   run: |
    #     : # create release
    #     gh release create "$INPUT_TAG" --latest --generate-notes --verify-tag
    #   shell: bash
    #   env:
    #     INPUT_TAG: ${{ inputs.tag }}

    # - if: inputs.assets != null
    #   run: |
    #     : # create release with assets
    #     gh release create "$INPUT_TAG" --latest --generate-notes --verify-tag "$INPUT_ASSETS"/*
    #   shell: bash
    #   env:
    #     INPUT_TAG: ${{ inputs.tag }}
    #     INPUT_ASSETS: ${{ inputs.assets }}

    # - run: |
    #     : # comment release link
    #     gh pr comment '${{ github.event.number }}' --body "Published release can be found at https://github.com/$GITHUB_REPOSITORY/releases/latest"
    #   shell: bash
